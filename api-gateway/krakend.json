{
  "name": "Task Manager Gateway",
  "version": 3,
  "port": 8000,
  "extra_config": {
    "github_com/devopsfaith/krakend-gologging": {
      "level": "DEBUG",
      "prefix": "[KRAKEND]",
      "syslog": false,
      "stdout": true
    },
    "github_com/devopsfaith/krakend-cors": {
      "allow_origins": ["http://localhost:3000", "http://127.0.0.1:3000"],
      "allow_methods": ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"],
      "allow_headers": ["Origin", "Content-Type", "Authorization", "Accept", "X-Requested-With"],
      "expose_headers": ["Content-Length"],
      "allow_credentials": true,
      "max_age": "12h"
    }
  },
  "endpoints": [
    {
      "endpoint": "/register",
      "method": "POST",
      "output_encoding": "no-op",
      "backend": [
        {
          "url_pattern": "/register",
          "encoding": "no-op",
          "method": "POST",
          "host": [
            "http://auth-service:8081"
          ],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/login",
      "method": "POST",
      "output_encoding": "no-op",
      "backend": [
        {
          "url_pattern": "/login",
          "encoding": "no-op",
          "method": "POST",
          "host": [
            "http://auth-service:8081"
          ],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/logout",
      "method": "POST",
      "output_encoding": "no-op",
      "input_headers": [
        "Authorization",
        "Content-Type"
      ],
      "backend": [
        {
          "url_pattern": "/logout",
          "encoding": "no-op",
          "host": [
            "http://auth-service:8081"
          ],
          "headers_to_pass": ["Authorization", "Content-Type"],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/refresh",
      "method": "POST",
      "output_encoding": "no-op",
      "input_headers": [
        "Authorization",
        "Content-Type"
      ],
      "backend": [
        {
          "url_pattern": "/refresh",
          "encoding": "no-op",
          "host": [
            "http://auth-service:8081"
          ],
          "headers_to_pass": ["Authorization", "Content-Type"],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/health",
      "method": "GET",
      "backend": [
        {
          "url_pattern": "/health",
          "host": [
            "http://auth-service:8081"
          ],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/tasks",
      "method": "POST",
      "output_encoding": "no-op",
      "input_headers": [
        "Authorization"
      ],
      "backend": [
        {
          "url_pattern": "/tasks",
          "encoding": "no-op",
          "method": "POST",
          "host": [
            "http://task-service:8082"
          ],
          "headers_to_pass": [
            "Authorization"
          ]
        }
      ]
    },
    {
      "endpoint": "/tasks",
      "method": "GET",
      "output_encoding": "no-op",
      "input_headers": [
        "Authorization",
        "Content-Type"
      ],
      "backend": [
        {
          "url_pattern": "/tasks",
          "encoding": "no-op",
          "method": "GET",
          "host": [
            "http://task-service:8082"
          ],
          "headers_to_pass": ["Authorization", "Content-Type"],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/tasks/{taskId}",
      "method": "GET",
      "input_headers": [
        "Authorization",
        "Content-Type"
      ],
      "backend": [
        {
          "url_pattern": "/tasks/{taskId}",
          "host": [
            "http://task-service:8082"
          ],
          "headers_to_pass": ["Authorization", "Content-Type"],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/tasks/{taskId}",
      "method": "PUT",
      "input_headers": [
        "Authorization",
        "Content-Type"
      ],
      "backend": [
        {
          "url_pattern": "/tasks/{taskId}",
          "host": [
            "http://task-service:8082"
          ],
          "headers_to_pass": ["Authorization", "Content-Type"],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/tasks/{taskId}",
      "method": "DELETE",
      "input_headers": [
        "Authorization",
        "Content-Type"
      ],
      "backend": [
        {
          "url_pattern": "/tasks/{taskId}",
          "host": [
            "http://task-service:8082"
          ],
          "headers_to_pass": ["Authorization", "Content-Type"],
          "extra_config": {
            "github.com/devopsfaith/krakend-httpsecure": {
              "allowed_hosts": [],
              "ssl_proxy_headers": {}
            }
          }
        }
      ]
    },
    {
      "endpoint": "/submissions",
      "method": "POST",
      "backend": [
        {
          "url_pattern": "/submissions",
          "host": [
            "http://task-submission-service:8083"
          ]
        }
      ]
    },
    {
      "endpoint": "/submissions/{submissionId}",
      "method": "GET",
      "backend": [
        {
          "url_pattern": "/submissions/{submissionId}",
          "host": [
            "http://task-submission-service:8083"
          ]
        }
      ]
    },
    {
      "endpoint": "/profile",
      "method": "GET",
      "backend": [
        {
          "url_pattern": "/profile",
          "host": [
            "http://user-service:8084"
          ]
        }
      ]
    },
    {
      "endpoint": "/profile",
      "method": "PUT",
      "backend": [
        {
          "url_pattern": "/profile",
          "host": [
            "http://user-service:8084"
          ]
        }
      ]
    }
  ]
}